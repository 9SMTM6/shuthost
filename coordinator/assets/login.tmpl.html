<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login â€¢ ShutHost</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./favicon.svg" type="image/svg+xml">
  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="./styles.css">
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 font-sans min-h-screen flex flex-col">
  { header }

  <main class="flex flex-col items-center justify-center flex-1 p-4 gap-4">
    <!-- Error banner placeholder -->
    <div class="max-w-md w-full" aria-live="polite">{error_html}</div>

    <!-- Login card -->
    <section class="section-container max-w-md w-full" aria-labelledby="login-title">
      <header class="py-3 text-center">
        <h1 id="login-title" class="text-lg font-semibold">Sign in with Access Token</h1>
      </header>
      <div class="p-4">
        <form method="post" action="/login" class="space-y-4">
          <div>
            <label class="block text-sm mb-1" for="token">Access Token</label>
            <div class="flex items-stretch gap-2 max-w-sm mx-auto">
      <input id="token" name="token" type="password" required autofocus autocomplete="current-password" spellcheck="false"
                     class="w-full rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-3 py-2" />
              <button type="button" id="toggle-token"
          class="px-3 py-2 rounded border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 leading-none"
          aria-label="Show token" aria-pressed="false" title="Show token">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18" aria-hidden="true"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="3"/></svg>
              </button>
            </div>
          </div>
          <button type="submit"
                  class="w-full text-xs sm:text-sm px-3 py-2 mt-3 rounded bg-green-600 text-white hover:bg-green-700 border border-transparent">
            Login
          </button>
        </form>
      </div>
    </section>
  </main>

  { footer }

  <script>
    (function(){
      const input = document.getElementById('token');
      const btn = document.getElementById('toggle-token');
      if (input && btn) {
        btn.addEventListener('click', () => {
          const isPw = input.type === 'password';
          input.type = isPw ? 'text' : 'password';
          btn.setAttribute('aria-pressed', String(isPw));
          btn.title = isPw ? 'Hide token' : 'Show token';
          const svg = isPw
            ? '<svg id="icon-eye-off" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18" aria-hidden="true"><path d="M2 4l2-2 18 18-2 2-3.4-3.4C14.7 19.5 13.4 20 12 20 5 20 2 13 2 13s1.1-2.4 3.2-4.7L2 4zm6.2 6.2L9.7 11.7A3 3 0 0 0 12 15a3 3 0 0 0 2.8-4l1.5 1.5A5 5 0 0 1 12 17a5 5 0 0 1-3.8-6.8zM12 5c2 0 3.7.6 5 .1l2.1 2.1C20.3 8.4 22 11 22 11s-3 7-10 7c-1.4 0-2.7-.5-3.8-1.2l1.5-1.5c.7.4 1.5.7 2.3.7a5 5 0 0 0 5-5c0-.8-.3-1.6-.7-2.3l1.5-1.5C18.5 6.7 15.6 5 12 5z"/></svg>'
            : '<svg id="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18" aria-hidden="true"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/><circle cx="12" cy="12" r="3"/></svg>';
          btn.innerHTML = svg;
        });
      }
    })();
  </script>
</body>
</html>
