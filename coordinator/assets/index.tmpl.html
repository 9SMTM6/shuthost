<!DOCTYPE html>
<html lang="en">

{ html_head }

<body class="html-body">
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content"
        class="sr-only focus:not-sr-only absolute left-2 top-2 bg-white dark:bg-gray-800 text-blue-700 dark:text-blue-200 px-3 py-2 rounded z-50 shadow transition-all">
        Skip to main content
    </a>
    { header }

    <main id="main-content" class="main px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full" tabindex="-1">
        <section class="py-4 sm:py-6" aria-labelledby="hosts-section-title">
            { maybe_external_auth_config }

            <section id="hosts-tab" class="tab-content active" aria-labelledby="tab-hosts" role="tabpanel" tabindex="0">
                <!-- Install Instructions Panel -->
                <section class="section-container mt-0 py-0" aria-labelledby="host-install-title">
                    <header class="collapsible-header py-2" data-target="host-install-content" aria-expanded="false"
                        aria-controls="host-install-content" id="host-install-header" tabindex="0" role="button">
                        <h2 class="section-title mb-0 text-base" id="host-install-title">Install Host Agent</h2>
                        <span class="collapsible-icon"></span>
                    </header>
                    <div id="host-install-content" class="collapsible-content" role="region"
                        aria-labelledby="host-install-title">
                        <p class="mb-1 text-sm">Run the following command in your terminal:</p>
                        <div class="code-container py-2">
                            <button class="copy-button" data-copy-target="#host-install-command" type="button"
                                aria-label="Copy install command">Copy</button>
                            <code id="host-install-command" class="code-block">Loading...</code>
                        </div>
                        <p class="description-text text-xs">Adjust options as needed. Add the output to the hosts
                            section of your config on the Coordinator Host:</p>
                        <div class="code-container">
                            <button class="copy-button" data-copy-target="#config-location" type="button"
                                aria-label="Copy config location">Copy</button>
                            <code id="config-location" class="code-block">{ coordinator_config }</code>
                        </div>

                        { agent_install_requirements_gotchas }
                    </div>
                </section>

                <!-- Hosts Table -->
                <section class="section-container mt-4" aria-labelledby="hosts-table-title">
                    <h2 id="hosts-table-title" class="sr-only">Hosts Table</h2>
                    <div class="table-wrapper">
                        <table class="w-full" aria-describedby="hosts-table-title">
                            <thead>
                                <tr id="host-table-header">
                                    <th class="table-header" scope="col">Host</th>
                                    <th class="table-header" scope="col">Status</th>
                                    <th class="table-header" scope="col">Leases</th>
                                    <th class="table-header" scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="host-table-body" class="divide-y divide-gray-200" aria-live="polite">
                                <!-- Hosts will be loaded here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </section>

            <section id="clients-tab" class="tab-content" aria-labelledby="tab-clients" role="tabpanel" tabindex="0">
                <!-- Install Instructions Panel -->
                <section class="section-container mt-0 py-0" aria-labelledby="client-install-title">
                    <header class="collapsible-header py-2" data-target="client-install-content" aria-expanded="false"
                        aria-controls="client-install-content" id="client-install-header" tabindex="0" role="button">
                        <h2 class="section-title mb-0 text-base" id="client-install-title">Install Client</h2>
                        <span class="collapsible-icon"></span>
                    </header>
                    <div id="client-install-content" class="collapsible-content" role="region"
                        aria-labelledby="client-install-title">
                        <p class="mb-1 text-sm">Run the following command in your terminal:</p>
                        <div class="code-container py-2">
                            <button class="copy-button" data-copy-target="#client-install-command" type="button"
                                aria-label="Copy install command">Copy</button>
                            <code id="client-install-command" class="code-block">Loading...</code>
                        </div>
                        <p class="description-text text-xs">Optionally, you can specify a custom client ID as the second
                            argument. Add the output to the clients section of your config on the Coordinator Host:</p>
                        <div class="code-container">
                            <button class="copy-button" data-copy-target="#config-location" type="button"
                                aria-label="Copy config location">Copy</button>
                            <code id="config-location" class="code-block">{ coordinator_config }</code>
                        </div>

                        { client_install_requirements_gotchas }
                    </div>
                </section>

                <!-- Clients Table -->
                <section class="section-container mt-4" aria-labelledby="clients-table-title">
                    <h2 id="clients-table-title" class="sr-only">Clients Table</h2>
                    <div class="table-wrapper">
                        <table class="w-full" aria-describedby="clients-table-title">
                            <thead>
                                <tr>
                                    <th class="table-header" scope="col">Client ID</th>
                                    <th class="table-header" scope="col">Leases</th>
                                    <th class="table-header" scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="client-table-body" class="divide-y divide-gray-200" aria-live="polite">
                                <!-- Clients will be loaded here dynamically -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </section>

            { architecture_documentation }
        </section>
    </main>

    { footer }

    <script>
        { js }
    </script>
</body>

</html>